<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª - OBS</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .ads-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .ad-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s;
            position: relative;
        }
        
        .ad-card.featured {
            border: 3px solid gold;
            box-shadow: 0 8px 25px rgba(255,215,0,0.3);
        }
        
        .ad-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .featured-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            background: gold;
            color: #333;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 12px;
        }
        
        .ad-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .ad-type {
            display: inline-block;
            padding: 4px 10px;
            background: #007bff;
            color: white;
            border-radius: 5px;
            font-size: 12px;
            margin: 5px 0;
        }
        
        .filter-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .filter-row {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
    </style>
</head>
<body>
   <script
  type="text/javascript"
  src="https://pl28238238.effectivegatecpm.com/1d/09/e9/1d09e9634bc5984737927c74c69517dd.js"
></script> 
    <nav>
        <div class="logo">OBS ğŸ“¢</div>
        <div class="nav-links">
            <a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="services.html">ğŸ› ï¸ Ø§Ù„Ø®Ø¯Ù…Ø§Øª</a>
            <a href="ads.html" class="active">ğŸ“¢ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</a>
            <a href="user.html">ğŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ</a>
        </div>
    </nav>

    <div class="container">
        <h1>ğŸ“¢ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©</h1>
        
        <!-- Ù‚Ø³Ù… Ø§Ù„ØªØµÙÙŠØ© -->
        <div class="filter-section">
            <h3>ğŸ” ØªØµÙÙŠØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª</h3>
            <div class="filter-row">
                <input type="text" id="searchAds" placeholder="Ø§Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª..." style="flex: 1;">
                <select id="typeFilter">
                    <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ù†ÙˆØ§Ø¹</option>
                    <option value="Ù…Ø­ØªØ§Ø¬ Ø®Ø¯Ù…Ø©">Ù…Ø­ØªØ§Ø¬ Ø®Ø¯Ù…Ø©</option>
                    <option value="Ù…Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø©">Ù…Ù‚Ø¯Ù… Ø®Ø¯Ù…Ø©</option>
                </select>
                <select id="sortFilter">
                    <option value="newest">Ø§Ù„Ø£Ø­Ø¯Ø« Ø£ÙˆÙ„Ø§Ù‹</option>
                    <option value="oldest">Ø§Ù„Ø£Ù‚Ø¯Ù… Ø£ÙˆÙ„Ø§Ù‹</option>
                    <option value="featured">Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ø£ÙˆÙ„Ø§Ù‹</option>
                </select>
                <button class="btn-secondary" onclick="filterAds()">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØµÙÙŠØ©</button>
                <button class="btn-primary" onclick="resetFilters()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
            </div>
        </div>

        <!-- Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª -->
        <div id="adsContainer">
            <div class="loading">
                <div class="spinner"></div>
                <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª...</p>
            </div>
        </div>
        
        <!-- Ø²Ø± Ø¥Ø¶Ø§ÙØ© Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯ -->
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn-primary" onclick="window.location.href='user.html'">
                â• Ø£Ø¶Ù Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø§Ù„Ø¢Ù†
            </button>
        </div>
    </div>

    <script type="module">
        import { db } from './firebase-config.js';
        import { collection, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

        let allAds = [];

        async function loadAds() {
            const container = document.getElementById("adsContainer");
            container.innerHTML = '<div class="spinner"></div><p>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</p>';
            
            try {
                const q = query(collection(db, "ads"), orderBy("date", "desc"));
                const snapshot = await getDocs(q);
                
                allAds = [];
                snapshot.forEach(doc => {
                    allAds.push({ id: doc.id, ...doc.data() });
                });
                
                displayAds(allAds);
            } catch (error) {
                container.innerHTML = `<p style="color: red;">Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª: ${error.message}</p>`;
            }
        }

        function displayAds(ads) {
            const container = document.getElementById("adsContainer");
            
            if (ads.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <p style="font-size: 24px;">ğŸ“­</p>
                        <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</h3>
                        <p>ÙƒÙ† Ø£ÙˆÙ„ Ù…Ù† ÙŠÙ†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ø§Ù‹!</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = `
                <div class="ads-grid">
                    ${ads.map(ad => `
                        <div class="ad-card ${ad.featured ? 'featured' : ''}">
                            ${ad.featured ? '<span class="featured-badge">ğŸŒŸ Ù…Ù…ÙŠØ²</span>' : ''}
                            
                            <span class="ad-type">${ad.type}</span>
                            <h3>${ad.name}</h3>
                            <p style="color: #666; margin: 10px 0;">${ad.desc}</p>
                            
                            ${ad.imageUrl ? `
                                <img src="${ad.imageUrl}" class="ad-image" alt="${ad.name}">
                            ` : ''}
                            
                            <div style="margin-top: 15px; font-size: 12px; color: #888;">
                                <div>ğŸ•’ ${ad.date}</div>
                                ${ad.location ? `<div>ğŸ“ ${ad.location}</div>` : ''}
                                ${ad.price ? `<div>ğŸ’° ${ad.price}</div>` : ''}
                            </div>
                            
                            <div style="margin-top: 10px;">
                                <button class="btn-secondary" onclick="viewAdDetails('${ad.id}')" 
                                        style="padding: 8px 15px; font-size: 14px;">
                                    Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        function filterAds() {
            const searchTerm = document.getElementById('searchAds').value.toLowerCase();
            const typeFilter = document.getElementById('typeFilter').value;
            const sortFilter = document.getElementById('sortFilter').value;
            
            let filtered = [...allAds];
            
            // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ø¨Ø­Ø«
            if (searchTerm) {
                filtered = filtered.filter(ad => 
                    ad.name.toLowerCase().includes(searchTerm) ||
                    ad.desc.toLowerCase().includes(searchTerm)
                );
            }
            
            // Ø§Ù„ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹
            if (typeFilter) {
                filtered = filtered.filter(ad => ad.type === typeFilter);
            }
            
            // Ø§Ù„ØªØ±ØªÙŠØ¨
            if (sortFilter === 'oldest') {
                filtered.sort((a, b) => new Date(a.date) - new Date(b.date));
            } else if (sortFilter === 'featured') {
                filtered.sort((a, b) => b.featured - a.featured);
            } else {
                filtered.sort((a, b) => new Date(b.date) - new Date(a.date));
            }
            
            displayAds(filtered);
        }

        function resetFilters() {
            document.getElementById('searchAds').value = '';
            document.getElementById('typeFilter').value = '';
            document.getElementById('sortFilter').value = 'newest';
            displayAds(allAds);
        }

        window.viewAdDetails = function(adId) {
            alert('Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: ' + adId + '\n\nÙ‡Ø°Ù‡ Ø§Ù„ÙˆØ¸ÙŠÙØ© Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±...');
        };

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
        window.addEventListener('DOMContentLoaded', loadAds);
        
        // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ©
        setInterval(loadAds, 30000);
    </script>
</body>
</html>
